import { useState } from "react";
import { Button } from "@/components/ui/button";
import { Popover, PopoverContent, PopoverTrigger } from "@/components/ui/popover";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import { ScrollArea } from "@/components/ui/scroll-area";

interface EmojiPickerProps {
  onEmojiSelect: (emoji: string) => void;
  trigger?: React.ReactNode;
}

const emojiCategories = {
  faces: {
    name: "Faces",
    emojis: [
      "üòÄ", "üòÉ", "üòÑ", "üòÅ", "üòÜ", "üòÖ", "ü§£", "üòÇ",
      "üôÇ", "üôÉ", "üòâ", "üòä", "üòá", "ü•∞", "üòç", "ü§©",
      "üòò", "üòó", "‚ò∫Ô∏è", "üòö", "üòô", "ü•≤", "üòã", "üòõ",
      "üòú", "ü§™", "üòù", "ü§ë", "ü§ó", "ü§≠", "ü§´", "ü§î",
      "ü§ê", "ü§®", "üòê", "üòë", "üò∂", "üôÑ", "üòè", "üò£",
      "üò•", "üòÆ", "ü§ê", "üòØ", "üò™", "üò´", "ü•±", "üò¥",
      "üòå", "üòõ", "üòú", "üòù", "ü§§", "üòí", "üòì", "üòî",
      "üòï", "üôÉ", "ü´†", "üòñ", "üòû", "üòü", "üò§", "üò¢",
      "üò≠", "üò¶", "üòß", "üò®", "üò©", "ü§Ø", "üò¨", "üò∞",
      "üò±", "ü•µ", "ü•∂", "üò≥", "ü§™", "üòµ", "ü•¥", "üò†"
    ]
  },
  people: {
    name: "People",
    emojis: [
      "üë∂", "üßí", "üë¶", "üëß", "üßë", "üë±", "üë®", "üßî",
      "üë©", "üßì", "üë¥", "üëµ", "üôç", "üôé", "üôÖ", "üôÜ",
      "üíÅ", "üôã", "üßè", "üôá", "ü§¶", "ü§∑", "üë®‚Äç‚öïÔ∏è", "üë©‚Äç‚öïÔ∏è",
      "üë®‚Äçüåæ", "üë©‚Äçüåæ", "üë®‚Äçüç≥", "üë©‚Äçüç≥", "üë®‚Äçüéì", "üë©‚Äçüéì", "üë®‚Äçüé§", "üë©‚Äçüé§",
      "üë®‚Äçüè´", "üë©‚Äçüè´", "üë®‚Äçüè≠", "üë©‚Äçüè≠", "üë®‚Äçüíª", "üë©‚Äçüíª", "üë®‚Äçüíº", "üë©‚Äçüíº",
      "üë®‚Äçüîß", "üë©‚Äçüîß", "üë®‚Äçüî¨", "üë©‚Äçüî¨", "üë®‚Äçüé®", "üë©‚Äçüé®", "üë®‚Äçüöí", "üë©‚Äçüöí",
      "üë®‚Äç‚úàÔ∏è", "üë©‚Äç‚úàÔ∏è", "üë®‚ÄçüöÄ", "üë©‚ÄçüöÄ", "üë®‚Äç‚öñÔ∏è", "üë©‚Äç‚öñÔ∏è", "üë∞", "ü§µ",
      "üë∏", "ü§¥", "ü¶∏", "ü¶π", "üßô", "üßö", "üßõ", "üßú"
    ]
  },
  animals: {
    name: "Animals",
    emojis: [
      "üê∂", "üê±", "üê≠", "üêπ", "üê∞", "ü¶ä", "üêª", "üêº",
      "üê®", "üêØ", "ü¶Å", "üêÆ", "üê∑", "üêΩ", "üê∏", "üêµ",
      "üôà", "üôâ", "üôä", "üêí", "üêî", "üêß", "üê¶", "üê§",
      "üê£", "üê•", "ü¶Ü", "ü¶Ö", "ü¶â", "ü¶á", "üê∫", "üêó",
      "üê¥", "ü¶Ñ", "üêù", "üêõ", "ü¶ã", "üêå", "üêû", "üêú",
      "ü¶ü", "ü¶ó", "üï∑Ô∏è", "üï∏Ô∏è", "ü¶Ç", "üê¢", "üêç", "ü¶é",
      "ü¶ñ", "ü¶ï", "üêô", "ü¶ë", "ü¶ê", "ü¶û", "ü¶Ä", "üê°",
      "üê†", "üêü", "üê¨", "üê≥", "üêã", "ü¶à", "üêä", "üêÖ"
    ]
  },
  food: {
    name: "Food",
    emojis: [
      "üçé", "üçê", "üçä", "üçã", "üçå", "üçâ", "üçá", "üçì",
      "ü´ê", "üçà", "üçí", "üçë", "ü•≠", "üçç", "ü••", "ü•ù",
      "üçÖ", "üçÜ", "ü•ë", "ü•¶", "ü•¨", "ü•í", "üå∂Ô∏è", "ü´ë",
      "üåΩ", "ü•ï", "ü´í", "üßÑ", "üßÖ", "ü•î", "üç†", "ü•ê",
      "ü•Ø", "üçû", "ü•ñ", "ü•®", "üßÄ", "ü•ö", "üç≥", "üßà",
      "ü•û", "üßá", "ü•ì", "ü•©", "üçó", "üçñ", "ü¶¥", "üå≠",
      "üçî", "üçü", "üçï", "ü•™", "ü•ô", "üßÜ", "üåÆ", "üåØ",
      "ü´î", "ü•ó", "ü•ò", "ü´ï", "üçù", "üçú", "üç≤", "üçõ"
    ]
  },
  travel: {
    name: "Travel",
    emojis: [
      "üöó", "üöï", "üöô", "üöå", "üöé", "üèéÔ∏è", "üöì", "üöë",
      "üöí", "üöê", "üõª", "üöö", "üöõ", "üöú", "üèçÔ∏è", "üõµ",
      "üö≤", "üõ¥", "üõπ", "üõº", "üöÅ", "üõ∏", "‚úàÔ∏è", "üõ©Ô∏è",
      "üõ´", "üõ¨", "ü™Ç", "üí∫", "üöÄ", "üõ∞Ô∏è", "üö¢", "‚õµ",
      "üö§", "üõ•Ô∏è", "üõ≥Ô∏è", "‚õ¥Ô∏è", "üöÅ", "üöä", "üöù", "üöû",
      "üöã", "üöÉ", "üöÇ", "üöÑ", "üöÖ", "üöÜ", "üöá", "üöà",
      "üöâ", "üöê", "üöë", "üöí", "üöì", "üöî", "üöï", "üöñ",
      "üöó", "üöò", "üöô", "üöö", "üöõ", "üöú", "üèçÔ∏è", "üõµ"
    ]
  },
  objects: {
    name: "Objects",
    emojis: [
      "üì±", "üì≤", "üíª", "‚å®Ô∏è", "üñ•Ô∏è", "üñ®Ô∏è", "üñ±Ô∏è", "üñ≤Ô∏è",
      "üïπÔ∏è", "üíΩ", "üíæ", "üíø", "üìÄ", "üìº", "üì∑", "üì∏",
      "üìπ", "üé•", "üìΩÔ∏è", "üéûÔ∏è", "üìû", "‚òéÔ∏è", "üìü", "üì†",
      "üì∫", "üìª", "üéôÔ∏è", "üéöÔ∏è", "üéõÔ∏è", "üß≠", "‚è±Ô∏è", "‚è∞",
      "‚è≤Ô∏è", "‚è≥", "‚åõ", "üì°", "üîã", "üîå", "üí°", "üî¶",
      "üïØÔ∏è", "ü™î", "üßØ", "üõ¢Ô∏è", "üí∏", "üíµ", "üí¥", "üí∂",
      "üí∑", "ü™ô", "üí∞", "üí≥", "üíé", "‚öñÔ∏è", "ü™ú", "üß∞",
      "üîß", "üî®", "‚öíÔ∏è", "üõ†Ô∏è", "‚õèÔ∏è", "ü™ì", "ü™ö", "üî©"
    ]
  },
  symbols: {
    name: "Symbols",
    emojis: [
      "‚ù§Ô∏è", "üß°", "üíõ", "üíö", "üíô", "üíú", "ü§é", "üñ§",
      "ü§ç", "üíî", "‚ù£Ô∏è", "üíï", "üíû", "üíì", "üíó", "üíñ",
      "üíò", "üíù", "üíü", "‚òÆÔ∏è", "‚úùÔ∏è", "‚ò™Ô∏è", "üïâÔ∏è", "‚ò∏Ô∏è",
      "‚ú°Ô∏è", "üîØ", "üïé", "‚òØÔ∏è", "‚ò¶Ô∏è", "üõê", "‚õé", "‚ôà",
      "‚ôâ", "‚ôä", "‚ôã", "‚ôå", "‚ôç", "‚ôé", "‚ôè", "‚ôê",
      "‚ôë", "‚ôí", "‚ôì", "üÜî", "‚öõÔ∏è", "üâë", "‚ò¢Ô∏è", "‚ò£Ô∏è",
      "üì¥", "üì≥", "üà∂", "üàö", "üà∏", "üà∫", "üà∑Ô∏è", "‚ú¥Ô∏è",
      "üÜö", "üíÆ", "üâê", "„äôÔ∏è", "„äóÔ∏è", "üà¥", "üàµ", "üàπ"
    ]
  },
  flags: {
    name: "Flags",
    emojis: [
      "üá¶üá©", "üá¶üá™", "üá¶üá´", "üá¶üá¨", "üá¶üáÆ", "üá¶üá±", "üá¶üá≤", "üá¶üá¥",
      "üá¶üá∂", "üá¶üá∑", "üá¶üá∏", "üá¶üáπ", "üá¶üá∫", "üá¶üáº", "üá¶üáΩ", "üá¶üáø",
      "üáßüá¶", "üáßüáß", "üáßüá©", "üáßüá™", "üáßüá´", "üáßüá¨", "üáßüá≠", "üáßüáÆ",
      "üáßüáØ", "üáßüá±", "üáßüá≤", "üáßüá≥", "üáßüá¥", "üáßüá∂", "üáßüá∑", "üáßüá∏",
      "üáßüáπ", "üáßüáª", "üáßüáº", "üáßüáæ", "üáßüáø", "üá®üá¶", "üá®üá®", "üá®üá©",
      "üá®üá´", "üá®üá¨", "üá®üá≠", "üá®üáÆ", "üá®üá∞", "üá®üá±", "üá®üá≤", "üá®üá≥",
      "üá®üá¥", "üá®üáµ", "üá®üá∑", "üá®üá∫", "üá®üáª", "üá®üáº", "üá®üáΩ", "üá®üáæ",
      "üá®üáø", "üá©üá™", "üá©üáØ", "üá©üá∞", "üá©üá≤", "üá©üá¥", "üá©üáø", "üá™üá®",
      "üá™üá™", "üá™üá¨", "üá™üá≠", "üá™üá∑", "üá™üá∏", "üá™üáπ", "üá™üá∫", "üá´üáÆ",
      "üá´üáØ", "üá´üá∞", "üá´üá≤", "üá´üá¥", "üá´üá∑", "üá¨üá¶", "üá¨üáß", "üá¨üá©",
      "üá¨üá™", "üá¨üá´", "üá¨üá¨", "üá¨üá≠", "üá¨üáÆ", "üá¨üá±", "üá¨üá≤", "üá¨üá≥",
      "üá¨üáµ", "üá¨üá∂", "üá¨üá∑", "üá¨üá∏", "üá¨üáπ", "üá¨üá∫", "üá¨üáº", "üá¨üáæ",
      "üá≠üá∞", "üá≠üá≤", "üá≠üá≥", "üá≠üá∑", "üá≠üáπ", "üá≠üá∫", "üáÆüá®", "üáÆüá©",
      "üáÆüá™", "üáÆüá±", "üáÆüá≤", "üáÆüá≥", "üáÆüá¥", "üáÆüá∂", "üáÆüá∑", "üáÆüá∏",
      "üáÆüáπ", "üáØüá™", "üáØüá≤", "üáØüá¥", "üáØüáµ", "üá∞üá™", "üá∞üá¨", "üá∞üá≠",
      "üá∞üáÆ", "üá∞üá≤", "üá∞üá≥", "üá∞üáµ", "üá∞üá∑", "üá∞üáº", "üá∞üáæ", "üá∞üáø",
      "üá±üá¶", "üá±üáß", "üá±üá®", "üá±üáÆ", "üá±üá∞", "üá±üá∑", "üá±üá∏", "üá±üáπ",
      "üá±üá∫", "üá±üáª", "üá±üáæ", "üá≤üá¶", "üá≤üá®", "üá≤üá©", "üá≤üá™", "üá≤üá´",
      "üá≤üá¨", "üá≤üá≠", "üá≤üá∞", "üá≤üá±", "üá≤üá≤", "üá≤üá≥", "üá≤üá¥", "üá≤üáµ",
      "üá≤üá∂", "üá≤üá∑", "üá≤üá∏", "üá≤üáπ", "üá≤üá∫", "üá≤üáª", "üá≤üáº", "üá≤üáΩ",
      "üá≤üáæ", "üá≤üáø", "üá≥üá¶", "üá≥üá®", "üá≥üá™", "üá≥üá´", "üá≥üá¨", "üá≥üáÆ",
      "üá≥üá±", "üá≥üá¥", "üá≥üáµ", "üá≥üá∑", "üá≥üá∫", "üá≥üáø", "üá¥üá≤", "üáµüá¶",
      "üáµüá™", "üáµüá´", "üáµüá¨", "üáµüá≠", "üáµüá∞", "üáµüá±", "üáµüá≤", "üáµüá≥",
      "üáµüá∑", "üáµüá∏", "üáµüáπ", "üáµüáº", "üáµüáæ", "üá∂üá¶", "üá∑üá™", "üá∑üá¥",
      "üá∑üá∏", "üá∑üá∫", "üá∑üáº", "üá∏üá¶", "üá∏üáß", "üá∏üá®", "üá∏üá©", "üá∏üá™",
      "üá∏üá¨", "üá∏üá≠", "üá∏üáÆ", "üá∏üáØ", "üá∏üá∞", "üá∏üá±", "üá∏üá≤", "üá∏üá≥",
      "üá∏üá¥", "üá∏üá∑", "üá∏üá∏", "üá∏üáπ", "üá∏üáª", "üá∏üáΩ", "üá∏üáæ", "üá∏üáø",
      "üáπüá¶", "üáπüá®", "üáπüá©", "üáπüá´", "üáπüá¨", "üáπüá≠", "üáπüáØ", "üáπüá∞",
      "üáπüá±", "üáπüá≤", "üáπüá≥", "üáπüá¥", "üáπüá∑", "üáπüáπ", "üáπüáª", "üáπüáº",
      "üáπüáø", "üá∫üá¶", "üá∫üá¨", "üá∫üá≤", "üá∫üá≥", "üá∫üá∏", "üá∫üáæ", "üá∫üáø",
      "üáªüá¶", "üáªüá®", "üáªüá™", "üáªüá¨", "üáªüáÆ", "üáªüá≥", "üáªüá∫", "üáºüá´",
      "üáºüá∏", "üáΩüá∞", "üáæüá™", "üáæüáπ", "üáøüá¶", "üáøüá≤", "üáøüáº", "üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø"
    ]
  },
  numbers: {
    name: "Numbers",
    emojis: [
      "0Ô∏è‚É£", "1Ô∏è‚É£", "2Ô∏è‚É£", "3Ô∏è‚É£", "4Ô∏è‚É£", "5Ô∏è‚É£", "6Ô∏è‚É£", "7Ô∏è‚É£", "8Ô∏è‚É£", "9Ô∏è‚É£", "üîü",
      "#Ô∏è‚É£", "*Ô∏è‚É£", "‚èèÔ∏è", "‚ñ∂Ô∏è", "‚è∏Ô∏è", "‚èπÔ∏è", "‚è∫Ô∏è", "‚è≠Ô∏è", "‚èÆÔ∏è",
      "‚èØÔ∏è", "üîÄ", "üîÅ", "üîÇ", "‚óÄÔ∏è", "üîº", "üîΩ", "‚û°Ô∏è", "‚¨ÖÔ∏è", "‚¨ÜÔ∏è",
      "‚¨áÔ∏è", "‚ÜóÔ∏è", "‚ÜòÔ∏è", "‚ÜôÔ∏è", "‚ÜñÔ∏è", "‚ÜïÔ∏è", "‚ÜîÔ∏è", "‚Ü™Ô∏è", "‚Ü©Ô∏è", "‚§¥Ô∏è",
      "‚§µÔ∏è", "üîÉ", "üîÑ", "üîô", "üîö", "üîõ", "üîú", "üîù", "üõê", "‚öõÔ∏è",
      "üïâÔ∏è", "‚ú°Ô∏è", "‚ò∏Ô∏è", "‚òØÔ∏è", "‚úùÔ∏è", "‚ò¶Ô∏è", "‚ò™Ô∏è", "‚òÆÔ∏è", "üïé", "üîØ",
      "‚ôà", "‚ôâ", "‚ôä", "‚ôã", "‚ôå", "‚ôç", "‚ôé", "‚ôè", "‚ôê", "‚ôë", "‚ôí", "‚ôì"
    ]
  }
};

export function EmojiPicker({ onEmojiSelect, trigger }: EmojiPickerProps) {
  const [open, setOpen] = useState(false);

  const handleEmojiClick = (emoji: string) => {
    onEmojiSelect(emoji);
    setOpen(false);
  };

  return (
    <Popover open={open} onOpenChange={setOpen}>
      <PopoverTrigger asChild>
        {trigger || (
          <Button variant="outline" size="sm">
            üòä Pick Emoji
          </Button>
        )}
      </PopoverTrigger>
      <PopoverContent className="w-80 p-0" align="start">
        <Tabs defaultValue="flags" className="w-full">
          <TabsList className="grid w-full grid-cols-5">
            <TabsTrigger value="flags" className="text-xs">üè≥Ô∏è</TabsTrigger>
            <TabsTrigger value="symbols" className="text-xs">‚≠ê</TabsTrigger>
            <TabsTrigger value="numbers" className="text-xs">#Ô∏è‚É£</TabsTrigger>
            <TabsTrigger value="objects" className="text-xs">üì±</TabsTrigger>
            <TabsTrigger value="faces" className="text-xs">üòä</TabsTrigger>
          </TabsList>
          
          {Object.entries(emojiCategories).map(([key, category]) => (
            <TabsContent key={key} value={key} className="mt-0">
              <div className="p-3">
                <h4 className="text-sm font-medium mb-2">{category.name}</h4>
                <ScrollArea className="h-48">
                  <div className="grid grid-cols-8 gap-1">
                    {category.emojis.map((emoji, index) => (
                      <Button
                        key={`${key}-${emoji}-${index}`}
                        variant="ghost"
                        size="sm"
                        className="h-8 w-8 p-0 hover:bg-accent"
                        onClick={() => handleEmojiClick(emoji)}
                      >
                        <span className="text-base" style={{ fontFamily: 'system-ui, "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", sans-serif' }}>
                          {emoji}
                        </span>
                      </Button>
                    ))}
                  </div>
                </ScrollArea>
              </div>
            </TabsContent>
          ))}
        </Tabs>
      </PopoverContent>
    </Popover>
  );
}